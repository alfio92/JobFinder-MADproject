<!--
  Generated template for the SignupPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->

<ion-header>
    
      <ion-toolbar color="primary-pale">
        <ion-buttons start>
          <button ion-button (click)="dismiss()">
            <span ion-text color="primary" showWhen="ios">Cancel</span>
            <ion-icon name="md-close" showWhen="android, windows"></ion-icon>
          </button>
        </ion-buttons>    
        <ion-title>SignUp</ion-title>
      </ion-toolbar>
    
    </ion-header>

<ion-content padding>

    <div text-center>
        <button ion-button round full padding type="submit">SignUp <ion-icon padding-left name="logo-facebook"></ion-icon></button>
        <button ion-button round full padding type="submit">SignUp <ion-icon padding-left name="logo-linkedin"></ion-icon></button>
      </div>

    <form [formGroup]="signupForm" (ngSubmit)="onSubmit()" padding>      
              
        <ion-list>

          <h1 text-center padding-top>YOUR INFO</h1>
            
          <ion-item>
            <ion-input type="text" formControlName="name" placeholder="Name"></ion-input>
          </ion-item>
            
          <ion-item>
            <ion-input type="text" formControlName="surname" placeholder="Surname"></ion-input>
          </ion-item>

          <ion-item margin-top>
              <ion-label class="fix-margin">Gender</ion-label>
              <ion-select interface="popover" formControlName="gender">
                <ion-option value="male">Male</ion-option>
                <ion-option value="female">Female</ion-option>
              </ion-select>  
          </ion-item>

          <ion-item>
              <ion-input type="text" formControlName="city" placeholder="Città"></ion-input>
          </ion-item>

          <ion-item>
              <ion-label class="fix-margin">Birthdate</ion-label>
              <ion-datetime formControlName="birthdate" displayFormat="DD/MM/YYYY"></ion-datetime>
          </ion-item>

          <ion-item>
              <ion-input type="text" formControlName="telnumber" placeholder="Tel.Number" pattern="[0-9]*"></ion-input>
          </ion-item>

          <h1 text-center>ACCOUNT INFO</h1>

          <ion-item margin-top>
              <ion-input type="text" formControlName="email" placeholder="Email"></ion-input>
          </ion-item>

          <ion-item>
              <ion-input type="text" formControlName="password" placeholder="Password"></ion-input>
          </ion-item>

          <ion-item>
              <ion-input type="text" formControlName="repeatpss" placeholder="RepeatPassword"></ion-input>
          </ion-item>

          <ion-item>
              <ion-label class="fix-margin">Tipo di Utente</ion-label>
              <ion-select formControlName="usertype" interface="popover" [(ngModel)]="userType" (ionChange)="signChange();">
                <ion-option value="user">Utente</ion-option>
                <ion-option value="business">Attività</ion-option>
              </ion-select>  
          </ion-item>

        <div class="header-margin" *ngIf="signUser">

          <h1 text-center>DETTAGLI UTENTE</h1>

            <ion-item>
                <ion-label>Diploma Scolastico</ion-label>
                <ion-select interface="popover" formControlName="study">
                  <ion-option value="terzamedia">Terza Media</ion-option>
                  <ion-option value="alberghiero">Istituto Professionale Alberghiero</ion-option>
                  <ion-option value="professionale">Istituto Professionale</ion-option>
                  <ion-option value="tecnico commerciale">Istituto Tecnico Superiore</ion-option>
                  <ion-option value="liceo">Liceo</ion-option>
                </ion-select>
            </ion-item>

            <ion-item>
                <ion-label>Skills</ion-label>
                <ion-select  formControlName="skills" multiple="true">
                  <ion-option value="animatore">Animatore</ion-option>
                  <ion-option value="aiutocuoco">Aiutocuoco</ion-option>
                  <ion-option value="barista">Barista</ion-option>
                  <ion-option value="barman">Barman</ion-option>
                  <ion-option value="cameriere">Cameriere</ion-option>
                  <ion-option value="chef">Chef</ion-option>
                  <ion-option value="cuoco">Cuoco</ion-option>
                  <ion-option value="gelataio">Gelataio</ion-option>
                  <ion-option value="inserviente">Inserviente</ion-option>
                  <ion-option value="lavapiatti">Lavapiatti</ion-option>
                  <ion-option value="pizzaiolo">Pizzaiolo</ion-option>
                  <ion-option value="receptionist">Receptionist</ion-option>
                </ion-select>
            </ion-item>

            <ion-item margin-top>
                <ion-textarea type="text" formControlName="description" rows="4" placeholder="Dai una descrizione di te"></ion-textarea>
            </ion-item>

            <ion-item margin-top>
                <ion-textarea type="text" formControlName="curriculum" rows="4" placeholder="Esperienze lavorative passate ed eventuali qualifiche"></ion-textarea>
            </ion-item>


        </div>

        <div class="header-margin" *ngIf="signBusiness">

          <h1 text-center>DETTAGLI ATTIVITA'</h1>
            
          <ion-item>
            <ion-input type="text" formControlName="businessname" placeholder="Nome Attività"></ion-input>
          </ion-item>

          <ion-item>
              <ion-label class="fix-margin">Tipo di Attività</ion-label>
              <ion-select interface="popover" formControlName="businesstype">
                  <ion-option value="Bar">Bar</ion-option>
                  <ion-option value="Ristorante">Ristorante</ion-option>
                  <ion-option value="Pizzeria">Pizzeria</ion-option>
                  <ion-option value="Pizza da asporto">Pizza da Asporto</ion-option>
                  <ion-option value="Pub">Pub</ion-option>
                  <ion-option value="Hotel">Hotel</ion-option>
                  <ion-option value="Motel">Motel</ion-option>
                  <ion-option value="Bed and Breakfast">Bed&Breakfast</ion-option>
                  <ion-option value="Stabilimento Balneare">Stabilimento Balneare</ion-option>
                  <ion-option value="Fast Food">Fast Food</ion-option>
                  <ion-option value="Gelateria">Gelateria</ion-option>
              </ion-select>
          </ion-item>

          <ion-item>
              <ion-input type="text" formControlName="city" placeholder="Città"></ion-input>
          </ion-item>


          <ion-item>
              <ion-label class="fix-margin">Regione</ion-label>
                <ion-select interface="popover" formControlName="region">
                  <ion-option value={{region.province}} *ngFor="let region of regioni" (click)="selectRegion(region.nome)">{{region.nome}}</ion-option>
                </ion-select>   
          </ion-item>

          <ion-item *ngIf="selectedRegion">
              <ion-label class="fix-margin">Provincia</ion-label>
              <ion-select interface="popover" formControlName="province">
                <ion-option value={{prov.sigla}} *ngFor="let prov of selectedRegion">{{prov.sigla}</ion-option>
              </ion-select>
          </ion-item>
              
          <ion-item>
              <ion-textarea rows="2" type="text" formControlName="address" placeholder="via/piazza, num.civico, CAP (es. via roma, 38, 67039)"></ion-textarea>
          </ion-item>

          <button *ngIf="signBusiness" ion-button round small padding (click)="nearbySearchApi()")>Verifica Attività</button>
          <p><small>Attiva il GPS</small></p>

          <ion-item>
              <ion-textarea rows="3" type="text" formControlName="description" placeholder="Descrizione attività"></ion-textarea>
          </ion-item>


        </div>

      </ion-list>
 
        <div text-center>
          <button ion-button round full padding type="submit" [disabled]="!signupForm.valid && ( !signBusiness && !verifyBusiness)">SignUp</button>
        </div>
        
    </form>

</ion-content>
